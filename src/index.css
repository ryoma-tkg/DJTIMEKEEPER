/* [src/index.css] */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* デザインシステム定義 (Version 3.1.0) */
:root {
  /* ライトモード (青みがかった薄いグレーベース) */
  --color-brand-primary: 0 123 255;
  /* #007bff */
  --color-brand-secondary: 0 123 255;
  /* #007bff */
  --color-surface-background: 248 250 252;
  /* #f8fafc (Slate 50) */
  --color-surface-container: 255 255 255;
  /* #ffffff */
  --color-on-surface: 15 23 42;
  /* #0f172a (Slate 900) */
  --color-on-surface-variant: 100 116 139;
  /* #64748b (Slate 500) */
}

html.dark {
  /* ダークモード (Zincベース) */
  --color-brand-primary: 0 145 255;
  /* #0091ff */
  --color-brand-secondary: 0 145 255;
  /* #0091ff */
  --color-surface-background: 24 24 27;
  /* #18181b (Zinc 900) */
  --color-surface-container: 39 39 42;
  /* #27272a (Zinc 800) */
  --color-on-surface: 244 244 245;
  /* #f4f4f5 (Zinc 100) */
  --color-on-surface-variant: 161 161 170;
  /* #a1a1aa (Zinc 400) */
}

html,
body {
  font-family: 'IBM Plex Sans JP', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: 'Montserrat', 'IBM Plex Sans JP', sans-serif;
  @apply bg-surface-background text-on-surface;
}

/* カスタムユーティリティ */
@layer utilities {

  /* スクロールバー非表示 (クロスブラウザ対応) */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
  }

  /* カスタムスクロールバー (サイドバーなど用) */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.3);
    /* gray-400/30 */
    border-radius: 3px;
  }

  .custom-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.5);
  }

  /* マスク画像 (フェードアウト用) */
  .mask-gradient {
    -webkit-mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
    mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
  }
}

/* コンポーネントスタイル */
.dragging-item {
  @apply ring-2 ring-brand-primary bg-surface-container;
  opacity: 0.95;
  transform: scale(1.05);
  box-shadow: 0 20px 30px -5px rgba(0, 0, 0, 0.3), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
  border-radius: 1rem;
  cursor: grabbing;
  z-index: 50;
}

.dj-list-item {
  position: relative;
  transition: transform 0.3s cubic-bezier(0.2, 0, 0, 1);
  z-index: 1;
}

/* ドロップインジケーター */
.drop-indicator-before::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 4px;
  background-color: rgb(var(--color-brand-primary));
  border-radius: 2px;
  top: -6px;
  pointer-events: none;
}

/* Safari 14 互換性対応 */
@layer utilities {
  @supports not (aspect-ratio: 1 / 1) {
    .aspect-square {
      position: relative;
      height: 0;
      padding-bottom: 100%;
    }

    .aspect-square>* {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }
}

.dragging-no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.dragging-no-select .cursor-grab {
  cursor: grabbing !important;
}

body.debug-layout * {
  outline: 1px solid rgba(255, 0, 0, 0.15) !important;
  background-color: rgba(255, 0, 0, 0.02) !important;
}