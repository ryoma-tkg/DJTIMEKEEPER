# DJ Timekeeper Pro

Firebase をバックエンドにした、DJ/VJイベント用のリアルタイム・タイムテーブル管理アプリです。
編集モードとLiveモードでデータを瞬時に同期します。

## 主な機能

- **直感的な編集モード**: DJの追加、削除、順番の入れ替え、時間の調整をドラッグ＆ドロップで直感的に行えます。
- **VJタイムテーブル機能**: DJとは別に、VJのタイムテーブルも管理可能。LiveモードではDJとVJの情報が同時に表示されます。
- **高機能なLiveモード**: 現在再生中のDJ/VJ、残り時間、次の出演者を全画面で表示する本番用ビューです。
- **リアルタイム同期**: Firebase Firestore を使用し、編集モードでの変更が即座にLiveモードに反映されます。
- **閲覧専用モード**: URLの末尾に `/#live` をつけることで、編集権限のない閲覧専用のLiveモードとして共有可能です。
- **画像アップロード＆圧縮**: DJのアイコンをアップロード可能。クライアントサイドで自動的に圧縮・リサイズされるため、高速に表示されます。
- **レスポンシブ対応**: PCでもスマホでも最適化されたレイアウトで表示されます。
- **テーマ切り替え**: ライトモードとダークモードに対応。閲覧者のデバイス設定（`localStorage`）に保存されます。
- **スリープ防止**: Liveモード中は `WakeLock API` を使用し、デバイスが自動でスリープするのを防ぎます。

## 使い方

### 編集モード ( `/` )

アプリのメイン画面（`/`）です。ここでタイムテーブルのすべてを管理します。

- **イベント設定**: イベントタイトル、全体の**開始日時**を設定できます。
- **DJ/VJ機能**: 設定モーダルから「VJタイムテーブル機能」をONにすると、VJ専用の管理カラムが出現します。
- **DJを追加**: DJ名、持ち時間（分）、イメージカラー、アイコン画像（アップロード or URL指定）を設定してDJを追加します。
- **VJを追加**: VJ名と持ち時間（分）を設定してVJを追加します。
- **バッファーを追加**: DJ間の転換時間として「バッファー」を追加できます。
- **並び替え**: DJやVJの左側にあるグリップアイコンを掴んで、ドラッグ＆ドロップで順番を入れ替えられます。
- **コピー・削除**: 各アイテムのボタンから、複製や削除が可能です。
- **Liveモードへ**: タイムテーブルが完成したら、右上の「Liveモード」ボタンで本番用画面に切り替えられます。

### Liveモード ( `/#live` )

本番中にフロアのスクリーンなどに映し出すためのビューです。
編集モードのヘッダーにある「設定」ボタンから、閲覧専用URL（`/#live`）をコピーできます。

- **現在のDJ**: 現在のDJ名と残り時間が大きく表示されます。
- **現在のVJ**: VJ機能がONの場合、DJ情報の下に現在のVJ名と残り時間が独立して表示されます。
- **次の出演者**: 「NEXT UP」として次のDJ名と開始時刻が表示されます。
- **ダイナミック背景**: 現在再生中のDJのテーマカラーが、背景にグラデーションで表示されます。
- **リアルタイムタイムライン**: 画面下部には、現在のDJが中央に来るように自動スクロールするタイムラインが表示されます。
- **メニュー**: ヘッダーのメニューから「全体を見る」モーダルを開いたり、編集モードに戻ったり（管理者のみ）できます。