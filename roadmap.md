🚀 リリースに向けたマイルストーン
フェーズ1: リファクタリング＆バグ修正 (✅ 完了)
アプリ（シングルイベント版）の完成度を高めるフェーズ。
... (省略) ...
フェーズ2.9: リファクタリング (✅ 完了)
コードの可読性と保守性を高めるフェーズ。

フェーズ3-0: 開発環境の分離（ブランチ戦略） (✅ 完了)
フェーズ3の巨大な改修に備え、本番環境（main）と開発環境（staging）を分離する。

✅ 1. ブランチの分離:
✅ 2. ステージング環境の構築: (Firebase Hosting プレビューチャンネル)

👉 (← イマココっす！)
フェーズ3: Webサービス化（リリースの基盤） (🚧 作業中)
現在の「シングルイベント版」から、複数ユーザー・複数イベントに対応した「マルチテナント」構造に変更するフェーズ。
現在の `/#live` のセキュリティ問題（URLから `#` を外すと編集画面が見えてしまう）を根本的に解決する。

1. 認証の導入 (Google / Email): (✅ 完了)
   - Firebase 匿名認証を廃止し、Google認証を導入。（`signInWithPopup`, `onAuthStateChanged`）
   - `App.jsx` を認証状態（`authed`, `no-auth`）で表示を切り替える「門番」として改修。
   - `LoginPage.jsx` を新設。
   - 開発者モード（`DevControls`）を、特定の `ownerUid` を持つ管理者アカウントのみが表示・利用できるようにアクセス制御を行う。（←これは次回）

2. データ構造の変更 (マルチテナント化): (🚧 作業スタンバイ)
   - Firestoreの `artifacts/{appId}/public/sharedTimetable` という単一ドキュメント構造を廃止する。
   - 新たに `timetables` コレクションを作成する。
   - 各イベント（タイムテーブル）は、`timetables` コレクション内の個別のドキュメント（例: `timetables/aK4xLp...`）として保存する。
   - 各ドキュメントには `ownerUid: "作成者のUserID"` を持たせ、データとユーザーを紐付ける。

3. ルーティングとアクセス制御 (react-router-dom): (🚧 作業中)
   - `react-router-dom` を導入し、ハッシュ（`#`）ベースのURLを廃止する。
   - **`App.jsx` からロジックを分離:**
     - `DashboardPage.jsx` を新設: ログイン後の `/`。イベント一覧の表示と新規作成を行う。
     - `EditorPage.jsx` を新設: `/edit/:eventId`。旧`App.jsx` が持っていた `TimetableEditor` と関連ロジック（DB読み書き、`useTimetable` 等）を**ここへ移行する**。
     - `LivePage.jsx` を新設: `/live/:eventId`。旧`App.jsx` が持っていた `LiveView` と関連ロジックを**ここへ移行する**。
   - URLを `/edit/:eventId`（編集モード）と `/live/:eventId`（閲覧モード）に完全に分離する。
   - `/edit/:eventId`: アクセス時、ドキュメントの `ownerUid` と「現在ログイン中のユーザーID」を照合する。一致しない場合は編集画面を表示せず、`/live/...` にリダイレクトするなどのセキュリティ対策を実装する。

4. (引き継ぎレポート案) 複数フロア管理機能 (NEW!)
   - 1つのイベント（timetable ドキュメント）が複数のフロア（例: 'Floor A', 'Floor B'）を持てるようにデータ構造を拡張する。
   - UI（編集モード、Liveモード）もフロア切り替えに対応させる。

フェーズ4: リリースとPro機能
いよいよアプリを「サービス」としてリリースするフェーズ。

1. (引き継ぎレポート案) 「公開用・自動更新ページ」の実装
   - `/public/:timetableId` のような、誰でも見れる（編集はできない）リアルタイム更新ページを作成する。これがPro機能のキラーコンテンツ。

2. (引き継ぎレポート案) マネタイズ対応
   - Stripeなどを導入し、Proプラン（サブスク）の仕組みを作る。

3. (引き継ぎレポート案) その他のPro機能
   - 画像書き出し（html2canvas）
   - CSVインポート
   - プリセット保存
   - DJ登録機能